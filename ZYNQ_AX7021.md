# ZYNQ7000开发平台AX7021开发板学习

## 一、AC7021核心板
### （一）简介
核心板主要由ZYNQ7020 + 2个DDR3 + eMMc + QSPI Flash的最小系统构成，承担ZYNQ系统的高速数据处理和存储功能，ZYNQ7020和
两片DDR3之间的数据位宽为32位，两片DDR3容量高达1GB。32GB的eMMC FLASH存储芯片和256Mb的QSPI FLASH
用来静态存储 ZYNQ 的操作系统、文件系统及用户数据，用户可以通过核心板上的拨码开关
来选择不同的启动方式。ZYNQ7020 芯片可分成处理器系统部分 Processor System（PS）和
可编程逻辑部分 Programmable Logic（PL）。
### （二）ZYNQ芯片
芯片的 PS 系统集成了两个 ARM Cortex™-A9 处理器，AMBA®互连，内部存储器，外部存储
器接口和外设。这些外设主要包括 USB 总线接口，以太网接口，SD/SDIO 接口，I2C 总线接
口，CAN 总线接口，UART 接口，GPIO 等。PS 可以独立运行并在上电或复位下启动。


其中 PS 系统部分的主要参数如下：


- 基于 ARM 双核 CortexA9 的应用处理器，ARM-v7 架构 高达 1GHz


- 每个 CPU 32KB 1 级指令和数据缓存，512KB 2 级缓存 2 个 CPU 共享


- 片上 boot ROM 和 256KB 片内 RAM


- 外部存储接口，支持 16/32 bit DDR2、DDR3 接口


- 两个千兆网卡支持：发散-聚集 DMA ，GMII，RGMII，SGMII 接口


- 两个 USB2.0 OTG 接口，每个最多支持 12 节点


- 两个 CAN2.0B 总线接口


- 两个 SD 卡、SDIO、MMC 兼容控制器


- 2 个 SPI，2 个 UARTs，2 个 I2C 接口


- 4 组 32bit GPIO，54（32+22）作为 PS 系统 IO，64 连接到 PL


- PS 内和 PS 到 PL 的高带宽连接


其中 PL 逻辑部分的主要参数如下：


- 逻辑单元 Logic Cells：85K； - 查找表 LUTs: 53,200


- 触发器(flip-flops):106,400


- 乘法器 18x25MACCs：220; - Block RAM：4.9Mb； 


- 两个 AD 转换器,可以测量片上电压、温度感应和高达 17 外部差分输入通道，1MBPS

### （三）DDR3 DRAM
主要用于显卡内存
### （四）QSPI Flash
非易失特性，在使用中，它可以作为系统的启动设备来存储系统的启动镜像。这些镜像主要包括 FPGA 的 bit 文件、ARM 的应用程序代码以及其它的用户数据文件。
### （五）eMMc Flash
由于 eMMC FLASH 的大容量和非易失特性，在 ZYNQ 系统使用中，它可以作为系统大容量的存储设备，比如存储 ARM 的应用程序、系统文件以及其它的用户数据文件。
### （六）时钟配置
AC7021 核心板上分别为 PS 系统和 PL 逻辑部分提供了有源时钟，使 PS 系统和 PL 逻辑可以单独工作。
#### PS系统时钟源 
ZYNQ 芯片通过开发板上的 X1 晶振为 PS 部分提供 33.333MHz 的时钟输入。时钟的输入连接到 ZYNQ 芯片的 BANK500 的 PS_CLK_500 的管脚上。
#### PL系统时钟源
AC7021 核心板上提供了单端 50MHz 的 PL 系统时钟源，3.3V 供电。晶振输出连接到FPGA BANK13 的全局时钟(MRCC)，这个 GCLK 可以用来驱动 FPGA 内的用户逻辑电路。
### （七）USB转串口
为了 AC7021 核心板单独工作和调试， 我们为核心板配备了一个 Uart 转 USB 接口。用于核心板单独供电和调试。转换芯片采用 Silicon Labs CP2102GM 的 USB-UAR 芯片, USB接口采用 MINI USB 接口，可以用一根 USB 线将它连接到上 PC 的 USB 口进行核心板的单独供电和串口数据通信 。
### （八）LED灯
AC7021 核心板上有 6 个红色 LED 灯，其中 1 个是电源指示灯(PWR)，1 个是配置 LED灯(DONE)，2 个是用户 LED 灯（LED1~LED2）,另外两个是 UART 的发送接收指示灯(TX,RX)。当核心板供电后，电源指示灯会亮起；当 FPGA 配置程序后，配置 LED 灯会亮起。2 个用户LED 灯一个连接到 PS 的 MIO 上，一个连接到 PL 的 IO 上，用户可以通过程序来控制亮和灭，当连接用户 LED 灯的 IO 电压为高时，用户 LED 灯熄灭，当连接 IO 电压为低时，用户 LED会被点亮。
### （九）复位按键
复位按键按下，复位芯片会产生低电平的复位信号给 ZYNQ 芯片。
### （十）JTAG接口
预留了 JTAG 的测试座 J1，用来核心板单独 JTAG 下载和调试。核心板上 JTAG 接口 J1 采用 6 针的 2.54mm 间距的单排测试孔，用户如果需要在核心板上用 JTAG 连接调试的话，需要焊接 6 针的单排排针。
### （十一）拨码开关配置
AC7021核心板上有一个2位的拨码开关SW1用来配置ZYNQ系统的启动模式。AC7021系统开发平台支持三种启动模式。这三种启动模式分别是 JTAG 调试模式, QSPI FLASH 和 SD卡启动模式。
### （十二）电源
AC7021 核心板供电电压为 DC5V，单独使用时通过 Mini USB 接口供电，连接底板时通过底板供电，请注意不要 Mini USB 和底板同时供电，以免造成损坏。
## 三、扩展板
### （一）简介
扩展板的部分功能：

- 5 路 10/100M/1000M 以太网 RJ-45 接口

- 1 路 HDMI 输出显示接口

- 4 路 USB HOST 接口

- 1 路 USB Uart 通信接口

- 1 路 SD 卡接口
- 2 路 40 针扩展口
- JTAG 调试接口  2 个独立按键
- 2 个用户 LED 灯
